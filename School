package Objects;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;

public class School {
    private static ArrayList<Course> schoolCourses;
    private static ArrayList<Student> schoolStudents;
    private static HashMap<String, ArrayList<Student>> bookings;

    public School() {
        schoolCourses = new ArrayList<>();
        schoolStudents = new ArrayList<>();
        bookings = new HashMap<>();
    }

    public static void addCourse(Course course) {
        schoolCourses.add(course);
    }

    public static void addStudent(Student student) {
        schoolStudents.add(student);
    }

    public static void makeBooking(Student student, Course course) {
        if (!schoolStudents.contains(student))
            addStudent(student);
        if (!schoolCourses.contains(course))
            addCourse(course);
        if (bookings.containsKey(course.toString())) {
            ArrayList<Student> courseStudents = bookings.get(course.toString());
            if (courseStudents.contains(student))
                throw new RuntimeException("Student already have booked this course");
            courseStudents.add(student);
            bookings.replace(course.toString(), courseStudents);
        } else {
            bookings.put(course.toString(), new ArrayList<>(Collections.singletonList(student)));
        }
    }

    public static boolean checkBookings() {
        //each student in each course must be unique
        //each course from each student must be unique
        return true;
    }
}
